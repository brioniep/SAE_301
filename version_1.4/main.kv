<LoginScreen>:
    Image:
        source: "fond1.png"
        size_hint: (1, 1)
        allow_stretch: True
        keep_ratio: False
        pos_hint: {'x': 0, 'y': 0}

    Label:
        text: "Connexion"
        font_size: "48dp"
        halign: "center"
        color: "#FFFFFF"
        pos_hint: {'center_y': .8}

    TextInput:
        id: username_input
        hint_text: "Username"
        font_size: "20dp"
        size_hint_x: 0.8
        size_hint_y: None
        height: "40dp"
        pos_hint: {'center_x': .5, 'center_y': .55}
        foreground_color: "#FFFFFF"
        background_color: "#2A2A2A"

    TextInput:
        id: password_input
        hint_text: "Password"
        font_size: "20dp"
        size_hint_x: 0.8
        size_hint_y: None
        height: "40dp"
        pos_hint: {'center_x': .5, 'center_y': .45}
        password: True
        foreground_color: "#FFFFFF"
        background_color: "#2A2A2A"

    Button:
        text: 'Connexion'
        font_size: "20dp"
        size_hint_x: 0.9
        size_hint_y: None
        height: "50dp"
        pos_hint: {'center_x': .5, 'center_y': .25}
        background_color: "#1E90FF"
        color: "#FFFFFF"
        on_release: root.on_login()
    Label:
        id: message_label
        text: ""
        font_size: "20dp"
        color: "#FF4500"
        pos_hint: {'center_x': .5, 'center_y': .15}

<SuccessScreen>:
    Image:
        source: "fond1.png"
        size_hint: (1, 1)
        allow_stretch: True
        keep_ratio: False
        pos_hint: {'x': 0, 'y': 0}

    Label:
        text: '[u]ESP32 control[/u]'
        markup: True
        font_size: "45dp"
        halign: "center"
        color: "#FFFFFF"
        pos_hint: {'center_y': .9}

    Button:
        text: "Déconnexion"
        size_hint_y: None
        height: "50dp"
        background_color: "#1E90FF"
        color: "#FFFFFF"
        on_release: root.on_back()

    BoxLayout:
        orientation: 'horizontal'
        size_hint: (0.7, None)
        height: "40dp"
        pos_hint: {'center_x': .5, 'center_y': .65}  # Adjusted position
        canvas.before:
            Color:
                rgba: (1, 1, 1, 0.2)
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: [10]

        Label:
            id: temperature_1
            text: "Température : "
            font_size: "20dp"
            color: "#FFFFFF"  # Blanc
            size_hint_x: None
            width: self.texture_size[0] + 10

        Label:
            id: temperature_2
            text: ""
            font_size: "20dp"
            color: "#FFFFFF"  # Blanc
            size_hint_x: None
            width: self.texture_size[0] + 10

        Label:
            id: temperature_3
            text: "°C"
            font_size: "20dp"
            color: "#FFFFFF"  # Blanc
            size_hint_x: None
            width: self.texture_size[0] + 10

    BoxLayout:
        orientation: 'horizontal'
        size_hint: (0.5, None)
        height: "40dp"
        pos_hint: {'center_x': .5, 'center_y': .75}  # Adjusted position

        Button:
            id: button_on
            text: "ON"
            size_hint_x: 0.5
            background_color: [0.5, 1, 0.5, 1]
            color: "#FFFFFF"
            on_release: root.toggle_on()

        Button:
            id: button_off
            text: "OFF"
            size_hint_x: 0.5
            background_color: [1, 0.5, 0.5, 1]  # Rouge légèrement grisâtre (désactivé)
            color: "#FFFFFF"
            on_release: root.toggle_off()

    BoxLayout:
        orientation: 'vertical'
        size_hint: (0.8, None)
        height: "80dp"
        pos_hint: {'center_x': .5, 'center_y': .53}  # Adjusted position
        canvas.before:
            Color:
                rgba: (1, 1, 1, 0.2)
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: [10]

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: "40dp"

            Label:
                text: "Heure de début : "
                font_size: "20dp"
                color: "#FFFFFF"

            Spinner:
                id: start_hour
                text: '00'
                values: [str(i).zfill(2) for i in range(24)]
                size_hint: None, None
                size: "60dp", "44dp"

            Spinner:
                id: start_minute
                text: '00'
                values: [str(i).zfill(2) for i in range(60)]
                size_hint: None, None
                size: "60dp", "44dp"

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: "40dp"

            Label:
                text: "Heure de fin : "
                font_size: "20dp"
                color: "#FFFFFF"

            Spinner:
                id: end_hour
                text: '00'
                values: [str(i).zfill(2) for i in range(24)]
                size_hint: None, None
                size: "60dp", "44dp"

            Spinner:
                id: end_minute
                text: '00'
                values: [str(i).zfill(2) for i in range(60)]
                size_hint: None, None
                size: "60dp", "44dp"

    BoxLayout:
        orientation: 'vertical'
        size_hint: (0.8, None)
        height: "80dp"
        pos_hint: {'center_x': .5, 'center_y': .39}  # Adjusted position
        canvas.before:
            Color:
                rgba: (1, 1, 1, 0.2)
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: [10]

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: "40dp"

            Label:
                text: "Heure de début : "
                font_size: "20dp"
                color: "#FFFFFF"

            Spinner:
                id: start_hour2
                text: '00'
                values: [str(i).zfill(2) for i in range(24)]
                size_hint: None, None
                size: "60dp", "44dp"

            Spinner:
                id: start_minute2
                text: '00'
                values: [str(i).zfill(2) for i in range(60)]
                size_hint: None, None
                size: "60dp", "44dp"

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: "40dp"

            Label:
                text: "Heure de fin : "
                font_size: "20dp"
                color: "#FFFFFF"

            Spinner:
                id: end_hour2
                text: '00'
                values: [str(i).zfill(2) for i in range(24)]
                size_hint: None, None
                size: "60dp", "44dp"

            Spinner:
                id: end_minute2
                text: '00'
                values: [str(i).zfill(2) for i in range(60)]
                size_hint: None, None
                size: "60dp", "44dp"

    Label:
        id: good_message
        text: ""
        font_size: "20dp"
        halign: "center"
        color: "#00FF00"
        pos_hint: {'center_y': .28}

    Label:
        id: bad_message
        text: ""
        font_size: "20dp"
        halign: "center"
        color: "#FF0000"
        pos_hint: {'center_y': .24}

    Button:
        text: 'Enregistrer'
        font_size: "20dp"
        size_hint_x: 0.4
        size_hint_y: None
        height: "50dp"
        pos_hint: {'center_x': .5, 'center_y': .16}
        background_color: "#1E90FF"
        color: "#FFFFFF"
        on_release: root.save_time_schedule()